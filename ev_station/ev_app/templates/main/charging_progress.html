{% extends 'main/base.html' %}
{% block content %}
<div class="container mt-5 text-center">
  <h2 class="fw-bold text-success">Charging Progress</h2>
  <p class="text-muted">{{ booking.station.name }} | {{ booking.status }}</p>

  <div class="progress mt-4" style="height: 40px;">
    <div class="progress-bar progress-bar-striped progress-bar-animated bg-success"
         role="progressbar"
         style="width: {{ progress }}%;"
         aria-valuenow="{{ progress }}"
         aria-valuemin="0"
         aria-valuemax="100">
      {{ progress }}%
    </div>
  </div>

  {% if progress >= 100 %}
  <div class="alert alert-success mt-4">
    <h4>Charging Complete!</h4>
    <p class="mb-2">Your vehicle has been fully charged.</p>
    <a href="{% url 'charging_summary' booking.id %}" class="btn btn-primary btn-lg">View Summary</a>
  </div>
  {% else %}
  <p class="mt-3">Charging in progress... Please wait</p>
  <p class="text-muted small">This page will auto-refresh every 2 seconds</p>
  {% endif %}
</div>

{% if progress < 100 %}
<script>
  setTimeout(function() {
    window.location.reload();
  }, 2000);
</script>
{% endif %}
{% endblock %}
